<!DOCTYPE html>
<html lang="zh-CN">
<!--
增加：外部链接以新标签页打开
bug：无
-->
<head>
    <title>标题</title>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
    <meta name="robots" content="noindex,nofollow"/>
    <meta name="referrer" content="no-referrer"/>
    <link rel="stylesheet" href="fa.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="manifest" href="manifest.json"/>
    <link rel="icon" href="9.png"/>
    <style>
        @font-face{font-family:'icons';src:url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2') format('woff2'),url('fa.woff2') format('woff2');font-display:swap;}
        :root{color-scheme:light dark;}
        *{box-sizing:border-box;margin:0;padding:0;-ms-overflow-style:none!important;scrollbar-width:none!important;color:inherit;transition:background 0.3s ease,color 0.3s ease;}
        p,li{line-height:1.7em;letter-spacing:0.15em;}
        *::-webkit-scrollbar{display:none!important;}
        ::selection{background:var(--se);}
        html{font-size:100%;scroll-behavior:smooth;}
        body{font-family:"微软雅黑",sans-serif;background-position:50% 50%!important;background-repeat:no-repeat!important;background-size:cover!important;background-attachment:fixed!important;}
        hr{border:0px;border-radius:1px;margin:15px 10px;padding:1px;background:linear-gradient(to right,transparent 0%,var(--hr) 30%,var(--hr) 70%,transparent 100%);}
        a{color:var(--ac);text-decoration-style:dotted;&:hover{color:var(--ah);}}
        h1,h2,h3,h4,h5,h6{}
        sup[class="fa fa-external-link"]{font-size:0.7em;opacity:0.8;line-height:0;color:var(--ac);vertical-align:super;position:relative;top:0;&:hover{opacity:0.7;}}
        img,svg,canvas,audio,video{max-width:100%;}
        button{border:none;}
        main *[id]{scroll-margin-top:55px;}
        input:focus{outline:none;}
        
        #bigger,#smaller{display:none;justify-content:center;align-items:center;padding:20px 5px;text-align:center;width:100dvw;height:100dvh;top:0;left:0;backdrop-filter:blur(20px);}
        #bigger{font-size:5rem;}
        #smaller{font-size:1.2rem;}
        
        body[data-t="l"]{
            >#main{background:rgba(241,243,244,var(--opacity,100%));}
            background:#f1f3f4;
            color:#212121;
            --se:#32676788;
            --nb:#abb5ba88;
            --nc:#507c95cc;
            --np:#859cad;
            --hr:#998033;
            --ac:#0a0ac2;
            --ah:#2525f4;
            --db:#dddad588;
            --dl:#cbc3b388;
            --dr:#bcae8f88;
            --df:#403826;
            --ds:#a8b87a88;
            --dt:#849550;
            --lb:#d5ddda;
            --lc:#2c3a2c;
            --ar:#7979d288;
            --qb:#d1c29488;
            --qi:#6b7d3688;
            --bl:#bc8fa188;
            --gs:#399a;
            --ge:#3995;
            --ga:#133939;
            --eh:#8f663d88;
        }
        body[data-t="d"]{
            >#main{background:rgba(0,0,26,var(--opacity,100%));}
            background:#00001a;
            color:#eff5f5;
            --se:#5959a688;
            --nb:#3d495c88;
            --nc:#b3bccc;
            --np:#8c8cc0;
            --hr:#e6d299;
            --ac:#8ca6f2;
            --ah:#5e82ed;
            --db:#38352e88;
            --dl:#4d453388;
            --dr:#6b624788;
            --df:#d6d1c2;
            --ds:#51544588;
            --dt:#636b47;
            --lb:#1d301d;
            --lc:#b6c8b6;
            --ar:;
            --qb:;
            --qi:;
            --bl:;
            --gs:;
            --ge:;
            --ga:;
            --eh:;
        }
        body[data-t="b"]{
            >#main{background:rgba(0,102,255,var(--opacity,100%));}
            background:#06f;
            color:#fff;
            --se:#cff8;
            --nb:#cffa;
            --nc:#36c;
            --np:#6cf;
            --hr:#cff;
            --ac:#fafa9e;
            --ah:#f5f53d;
            --db:#9cf8;
            --dl:#39f8;
            --dr:#198cb388;
            --df:#e6ffff;
            --ds:#0d7fa588;
            --dt:#52bde0;
            --lb:#e6ffff;
            --lc:#39f;
            --ar:#66c2ff88;
            --qb:#ffb3ff88;
            --qi:#f398;
            --bl:#b366ff88;
            --gs:#09ca;
            --ge:#09c5;
            --ga:#e6f9ff;
            --eh:#3cf8;
        }
        body[data-t="m"]{
            >#main{background:rgba(255,248,230,var(--opacity,100%));}
            background:#fff8e6;
            color:#3a2e00;
            --se:#ffd70088;
            --nb:#ffd90088;
            --nc:#5c4a00;
            --np:#b8b87a;
            --hr:#9c0;
            --ac:#d4a800;
            --ah:#ffcc00;
            --db:#fff0b388;
            --dl:#ffe06688;
            --dr:#fc38;
            --df:#332600;
            --ds:#ffb36688;
            --dt:#ff8c1a;
            --lb:#fff5cc;
            --lc:#8c6d00;
            --ar:;
            --qb:;
            --qi:;
            --bl:;
            --gs:;
            --ge:;
            --ga:;
            --eh:;
        }
        body[data-t="n"]{
            >#main{background:rgba(13,13,63,var(--opacity,100%));}
            background:#0d0d3f;
            color:#ecf2f9;
            --se:#96f8;
            --nb:#9908;
            --nc:#ffc;
            --np:#b8997a;
            --hr:#ad88f6;
            --ac:#ff9;
            --ah:#d9b3ff;
            --db:#0068;
            --dl:#3098;
            --dr:#5b2aef88;
            --df:#c8b8fa;
            --ds:#7317cf88;
            --dt:#9947eb;
            --lb:#006;
            --lc:#e6e6ff;
            --ar:#7a00cc88;
            --qb:#66841588;
            --qi:#a3cb3488;
            --bl:#981b5988;
            --gs:#0f8a8aaa;
            --ge:#0f8a8a55;
            --ga:#baf7f7;
            --eh:#0998;
        }
        body[data-w="l"]{font-weight:200;}
        body[data-w="n"]{font-weight:normal;}
        body[data-f="1"] *[data-tf="3"]{display:none;}
        body[data-f="2"] *[data-tf="3"]{display:none;}
        body[data-f="2"] *[data-tf="2"]{display:none;}
        body[data-f="3"] *[data-tf]{display:none;}
        
        #password{
            &::backdrop{background:light-dark(#0008,#fff8);backdrop-filter:blur(20px);}
            border-radius:20px;padding:22.5px 35px;border:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:light-dark(#fffa,#000a);text-align:center;color:light-dark(#333,#ccc);z-index:3;
            >h1{font-size:1.875rem;margin:10px;}
            >div{
                display:flex;justify-content:center;margin:10px 0;
                >input{width:200px;height:40px;border:1px solid #888;border-radius:10px 0 0 10px;font-size:1.125rem;padding:0 10px;}
                >button{width:60px;height:40px;border:1px solid #888;border-radius:0 10px 10px 0;font-size:1.125rem;background:#888;color:light-dark(#fff,#000);}
            }
        }
        
        #loader{
            background:var(--lb);width:100dvw;height:100dvh;z-index:2;overflow:hidden;position:fixed;top:0;left:0;display:flex;justify-content:center;align-items:center;transition:none;flex-wrap:wrap;
            >div{
                width:100vw;text-align:center;
                >p{color:var(--lc);transition:opacity 0.2s;margin:10px 0;padding:0;font-size:1.25rem;}
                >button{background:var(--nb);font-size:1.125rem;padding:2.5px 15px;line-height:30px;border-radius:15px;transition:none;}
            }
        }
        @keyframes out{0%{opacity:1;}99%{opacity:0;}100%{opacity:0;display:none;}}
        
        nav{
            position:fixed;background:var(--nb);height:40px;padding:5px;backdrop-filter:blur(15px);z-index:1;margin:auto;box-shadow:;user-select:none;transition:height 0.3s;overflow:hidden;
            &::before{content:'';position:absolute;top:0;left:0;width:var(--progress,0%);pointer-events:none;z-index:-1;height:40px;opacity:0.4;background:var(--nb);}
            &:has(>div:nth-of-type(2).active){height:400px;}
            >div:nth-of-type(1){
                display:flex;justify-content:center;height:40px;
                >div:nth-of-type(1){
                    >button{width:30px;height:30px;border-radius:50%;background:transparent;transition:background 0.3s;&:hover{background:#73838c88;}&::before{color:var(--nc);font-size:20px;}}
                }
                >div:nth-of-type(2){
                    display:none;
                    >input{height:30px;width:140px;background:#fff8;border:none;border-radius:15px;padding:0 10px;margin-left:15px;&::placeholder{color:var(--np);}}
                    &::before{position:absolute;content:"";width:1px;height:20px;top:10px;background:var(--nc);margin:0 5px;border-radius:0.5px;}
                }
            }
            >div:nth-of-type(2){
                height:0;opacity:1;transition:0.3s;background:#fff3;pointer-events:none;padding:7.5px;border-radius:15px;
                &.active{height:350px;opacity:1;pointer-events:auto;overflow-y:auto;}
                >div{
                    position:relative;padding-left:7.5px;margin-left:5px;
                    &::before{content:'';position:absolute;left:0;top:5px;bottom:5px;width:3px;background:var(--nb);opacity:0.5;border-radius:1.5px;}
                    >a{display:block;text-decoration:none;height:40px;padding:2.5px 10px;border-radius:22.5px;line-height:35px;background:transparent;margin:2.5px 0;color:inherit;&:hover{background:#fff5;}}
                }
                >button{display:block;width:100%;text-align:left;font-size:1.125rem;padding:5px 15px;border-radius:99px;margin-top:5px;background:transparent;transition:0.3s;&:hover{background:#fff5;}}
            }
        }
        body[data-n="1"] nav{top:0;left:0;width:100dvw;}
        body[data-n="2"] nav{top:10px;left:10px;width:calc(100dvw - 20px);border-radius:20px;&::before{border-radius:20px;}}
        
        #sD{
            width:clamp(500px,60dvw,300px);border-radius:20px;padding:10px;border:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--db);backdrop-filter:blur(3px);user-select:none;
            &::backdrop{background:#0006;backdrop-filter:blur(2px);}
            >div:first-child{font-weight:bold;font-size:1.25rem;padding:5px 10px 20px 10px;}
            >div:not(:first-child){
                height:40px;padding:5px;background:var(--dl);border-radius:20px;margin:5px 0;text-align:right;clear:both;content:"";display:table;width:100%;
                >span{line-height:30px;margin-left:10px;float:left;}
                >input[type="radio"]{
                    -webkit-appearance:none;-moz-appearance:none;appearance:none;height:30px;min-width:30px;border-radius:15px;position:relative;transition:opacity 0.3s;background:var(--dr);margin:0 2.5px;opacity:0.4;
                    &::before{content:var(--rc);font-size:18px;width:30px;height:30px;line-height:30px;margin:0 6px;color:var(--df);}
                    &:checked{opacity:1;}
                }
                >button{height:30px;background:var(--dl);color:var(--df);border-radius:15px;padding:0 10px;line-height:30px;font-size:16px;margin-left:2.5px;}
                >div{
                    width:100%;background:var(--dl);height:35px;padding:2.5px;border-radius:17.5px;margin-top:5px;
                    >span{line-height:30px;margin-left:10px;float:left;}
                    >input{
                        -webkit-appearance:none;-moz-appearance:none;appearance:none;width:100px;height:20px;border-radius:10px;background:var(--ds);outline:none;opacity:0.7;transition:opacity 0.2s;margin:5px 7.5px 5px 0;
                        &:hover{opacity:1;}
                        &::-webkit-slider-track{height:10px;border-radius:5px;}
                        &::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;background:var(--dt);border-radius:50%;cursor:pointer;}
                        &::-moz-range-track{height:10px;border-radius:5px;}
                        &::-moz-range-thumb{width:20px;height:20px;background:var(--dt);border-radius:50%;cursor:pointer;}
                    }
                }
            }
            >button{background:#b8141488;color:#fff;width:100%;font-size:1.1125rem;padding:5px;text-align:center;border-radius:99px;}
        }
        
        main{
            padding:60px 10px 10px 10px;min-height:100dvh;
            >header{font-size:2rem;text-align:center;padding:20px 0 50px 0;}
            article{background:var(--ar,#0066ff88);padding:12.5px;border-radius:15px;margin:5px 0;>p{text-indent:2em;}>h1{text-align:center;margin:5px auto;}}
            q{background:var(--qb,#06f8);font-size:1.5625rem;display:block;text-align:center;padding:8px;border-radius:10px;margin:5px 0;&::before{font-family:"icons";content:"\f10d";color:var(--qi);padding-right:10px;}&::after{font-family:"icons";content:"\f10e";color:var(--qi);padding-left:10px;}}
            blockquote{background:var(--bl);padding:20px;border-radius:10px;border-left:5px solid #8884;margin:5px 0;}
            .gallery{background:linear-gradient(var(--gs),var(--ge));padding:15px;border-radius:15px;text-align:center;margin:5px 0;>img{max-width:600px;width:100%;border-radius:10px;}>p{color:var(--ga);}}}
        #EVENT{
            >h1{background:var(--eh,#0998);text-align:center;border-radius:100dvw;margin:25px 15px 5px 15px;padding:10px;color:#fff;}
            >div{
                margin:10px 0;padding:20px 8px 10px 8px;border-radius:10px;width:100%;background:#9df5;
                >time{position:relative;top:-15px;left:-3px;float:left;margin-right:-9999px;text-align:center;padding:5px 0;min-width:1.9em;border-radius:10px;font-weight:700;background:#6cf;color:#000;}
                >p{padding:2.5px 0;text-indent:2em;}
                >ul,>ul>ul{margin:3px 3px 3px 13px;padding:5px;background:#ffffff44;border-radius:15px;>li,>ul>li{text-indent:2em;list-style-type:none;&::before{position:relative;content:"●";color:#00000088;margin-right:5px}}>li:first-child{font-weight:bold;&::before{all:unset}}}
                &.sp1{background:#cfc5;>time{background:#9f9}}
                &.sp2{background:#fec5;>time{background:#fd9}}
                &.sp3{background:#fce5;>time{background:#f9d}}
                &.sp4{background:#fc95;>time{background:#f93}}
            }
            .hot{background:#d9d98c88;color:#212121;li:before{content:"";}>ul>li:first-child{font-weight:unset;}}
            .mt{background:#f9f8;color:#303;font-style:italic;li:before{content:"";}}
            mark{background-color:#d9b3ff88;padding:0 5px;border-radius:15px;}
        }
        
        @media screen and (min-width:1600px),(min-height:900px){#bigger{display:flex;}#password,#main,#loader,nav{display:none!important;}}
        @media screen and (max-width:320px),(max-height:500px){#smaller{display:flex;}#password,#main,#loader,nav{display:none!important;}}
    </style>
</head>
<body onload="document.getElementById('loader').style.animation='out 0.7s 0.3s forwards'" data-t="l" data-w="n" data-n="2" data-f="3">
    <dialog id="password">
        <h1>输入密码</h1>
        <div><input type="password"/><button onclick="ep()">OK</button></div>
        <p><strong>提示：</strong>一些文本一些文本</p>
    </dialog>
    <div id="loader">
        <div><p>文本1</p><button onclick="document.getElementById('loader').style.animation='out 0.7s 0.3s forwards'">跳过</button></div>
        <script>const texts=["文本1","文本2"];let currentIndex=0;const carouselText=document.querySelector('#loader>div>p');carouselText.textContent=texts[currentIndex];function rotateText(){currentIndex=(currentIndex+1)%texts.length;carouselText.style.opacity='0';setTimeout(()=>{carouselText.textContent=texts[currentIndex];carouselText.style.opacity='1';},200);}setInterval(rotateText,1000);</script>
    </div>
    <div id="bigger">窗口过大</div>
    <div id="smaller">窗口过小</div>
    <nav>
        <div>
            <div>
                <button onclick="document.querySelector('nav>div:nth-of-type(2)').classList.toggle('active')" class="fa fa-navicon"></button>
                <button onclick="window.scrollTo(0,0)" class="fa fa-chevron-up"></button>
                <button onclick="showPage('HOME')" class="fa fa-home"></button>
                <button onclick="window.scrollTo(0,document.documentElement.scrollHeight)" class="fa fa-chevron-down"></button>
                <button onclick="document.getElementById('sD').showModal()" class="fa fa-gear"></button>
            </div>
            <div>
                <input type="text" placeholder="搜索关键词" oninput="search()"/>
            </div>
        </div>
        <div>
            <div id="EVENT-l">
                <a href="#event-d2409">2024年9月</a>
                <a href="#event-d2410">2024年10月</a>
            </div>
            <div id="INTRODUCTION-l">
                <a href="#">1链接</a>
                <a href="#">1链接</a>
                <a href="#">1链接</a>
            </div>
            <button onclick="showPage('EVENT')">日志</button>
            <button onclick="showPage('INTRODUCTION')">介绍</button>
        </div>
    </nav>
    <div id="main">
        <dialog id="sD">
            <div>设置<span onclick="document.getElementById('sD').close()" style="float:right;cursor:pointer;">×</span></div>
            <div>
                <span>主题</span>
                <input type="radio" name="t" onclick="chT('l')" style="--rc:'浅'">
                <input type="radio" name="t" onclick="chT('d')" style="--rc:'深'">
                <input type="radio" name="t" onclick="chT('b')" style="--rc:'蓝'">
                <input type="radio" name="t" onclick="chT('m')" style="--rc:'晨'">
                <input type="radio" name="t" onclick="chT('n')" style="--rc:'夜'">
            </div>
            <div>
                <span>字重</span>
                <input type="radio" name="w" onclick="chW('n')" style="--rc:'中'" checked>
                <input type="radio" name="w" onclick="chW('l')" style="--rc:'细'">
            </div>
            <div>
                <span>导航栏</span>
                <input type="radio" name="n" onclick="chN('1')" style="--rc:'经典'">
                <input type="radio" name="n" onclick="chN('2')" style="--rc:'胶囊'" checked>
            </div>
            <div>
                <span>内容过滤</span>
                <input type="radio" name="f" onclick="chF('0')" style="--rc:'无'">
                <input type="radio" name="f" onclick="chF('1')" style="--rc:'一'">
                <input type="radio" name="f" onclick="chF('2')" style="--rc:'二'">
                <input type="radio" name="f" onclick="chF('3')" style="--rc:'三'" checked>
            </div>
            <div>
                <span>背景图片</span>
                <button onclick="ubg()">清除</button>
                <button onclick="cbg()">上传</button>
                <div><span>透明度</span><input type="range" max="100" min="0" step="10" id="r1"/></div>
                <div><span>虚化</span><input type="range" max="30" min="0" step="3" id="r2"/></div>
            </div>
            <button onclick="localStorage.clear();ubg();location.reload(true);">重置<small style="color:#f99;">（将清除密码和个性化设置）</small></button>
        </dialog>
<main id="HOME">
<header><h1>首页</h1></header>
<hr/>
<p>页面开发中，敬请期待。</p>
<p>文本文本<a href="#">链接文本</a>文本。</p>
<p data-tf="1">过滤1</p>
<p data-tf="2">过滤2</p>
<p data-tf="3">过滤3</p>
<p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p><p>文本</p>
</main>
<main id="INTRODUCTION">
<header><h1>介绍</h1></header>
<h1>副标题1</h1>
<article>
    <h1>文章标题</h1>
    <p>文本文本文本文本文本文本文本文本文本文本文本文本。</p>
    <p>文本文本文本文本文本文本文本文本文本文本文本文本。</p>
</article>
<h1>副标题2</h1>
<q>引用文本</q>
<div class="gallery">
    <img src="error.jpg"/>
    <p>描述文本</p>
</div>
<blockquote>
    <p>长引用文本长引用文本</p>
    <p>长引用文本长引用文本</p>
</blockquote>
</main>
<main id="EVENT">
<header><h1>日志</h1></header>
<h1 id="event-d2409">2024年9月</h1>
<div>
    <time>1</time>
    <p>文本1</p>
    <ul>
        <li>无序列表标题</li>
        <li>无序列表项1</li>
        <li>无序列表项2</li>
    </ul>
    <p>文本2</p>
</div>
<div class="sp1">
    <time>2</time>
    <p>文本3</p>
</div>
<div class="sp2">
    <time>3</time>
    <p>文本4</p>
</div>
<div class="sp3">
    <time>4</time>
    <p>文本5</p>
</div>
<div class="sp4">
    <time>5</time>
    <p>文本6</p>
</div>
<h1 id="event-d2410">2024年10月</h1>
<div>
    <time>1</time>
    <p>文本7</p>
</div>
</main>
        <footer>
        
        </footer>
    </div>
<script>
//密码（abc）
function ep(){var e=document.querySelector("#password input").value;"YWJj"===btoa(e)?(localStorage.setItem("p","true"),document.getElementById("password").close()):document.querySelector("#password input").style.background="#f004"}
//页面切换
function showPage(e){
    const p=document.querySelectorAll('main'),
    t=document.getElementById(e),
    n=document.querySelectorAll("nav>div:nth-of-type(2)>div"),
    s=document.querySelector("nav>div:nth-of-type(1)>div:nth-of-type(2)");
    p.forEach(p=>{p.style.display="none";});
    n.forEach(n=>{n.style.display="none";});
    if(t){t.style.display="block";}
    e=="EVENT"?s.style.display="inline-block":s.style.display="none";
    document.getElementById(e+"-l").style.display="block"; 
}
//关闭菜单
document.addEventListener("click",function(t){var e=document.querySelector("nav>div:nth-of-type(2)"),n=document.querySelector("nav>div:nth-of-type(1) button.fa-navicon");e.classList.contains("active")&&!e.contains(t.target)&&t.target!==n&&e.classList.remove("active")}),document.querySelectorAll("nav>div:nth-of-type(2) a,nav>div:nth-of-type(2) button").forEach(t=>{t.addEventListener("click",function(){document.querySelector("nav>div:nth-of-type(2)").classList.remove("active")})});
//关闭模态框
document.getElementById("sD").addEventListener("click",function(t){var e=this.getBoundingClientRect();(t.clientX<e.left||e.right<t.clientX||t.clientY<e.top||e.bottom<t.clientY)&&this.close()});
//进度条
window.addEventListener("scroll",()=>{var e=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100;document.querySelector("nav").style.setProperty("--progress",e+"%")});
//主题切换
function chT(e){document.body.setAttribute("data-t",e),localStorage.setItem("t",e);}
function chW(e){document.body.setAttribute("data-w",e),localStorage.setItem("w",e);}
function chN(e){document.body.setAttribute("data-n",e),localStorage.setItem("n",e);}
function chF(e){document.body.setAttribute("data-f",e),localStorage.setItem("f",e);search();}
document.getElementById('r1').addEventListener('input',function(){document.querySelector('body>#main').style.setProperty("--opacity",this.value+"%");localStorage.setItem("o",this.value);});
document.getElementById('r2').addEventListener('input',function(){document.querySelector('body>#main').style.backdropFilter="blur("+this.value+"px)";localStorage.setItem("b",this.value);});
// 背景图片
let db;const request=indexedDB.open("backgroundDB",1);
function loadBackground(){const e=db.transaction(["background"],"readonly").objectStore("background").get(1);e.onsuccess=function(){e.result&&(document.body.style.backgroundImage=`url(${e.result.image})`)}}
function cbg(){var e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=function(e){var t,e=e.target.files[0];e&&((t=new FileReader).onload=function(e){db.transaction(["background"],"readwrite").objectStore("background").put({id:1,image:e.target.result}),document.body.style.backgroundImage=`url(${e.target.result})`},t.readAsDataURL(e))},e.click()}
function ubg(){db.transaction(["background"],"readwrite").objectStore("background").delete(1),document.body.style.backgroundImage=""}request.onupgradeneeded=function(e){(db=e.target.result).objectStoreNames.contains("background")||db.createObjectStore("background",{keyPath:"id"})},request.onsuccess=function(e){db=e.target.result,loadBackground()};

window.addEventListener('DOMContentLoaded',function(){
    const p=localStorage.getItem('p');p?document.getElementById('password').close():document.getElementById('password').showModal();
    const t=localStorage.getItem('t');t?chT(t):(window.matchMedia("(prefers-color-scheme:dark)").matches?chT('d'):chT('l'));
    const w=localStorage.getItem('w');w&&chW(w);
    const n=localStorage.getItem('n');n&&chN(n);
    const f=localStorage.getItem('f');f&&chF(f);
    const o=localStorage.getItem('o');
    if(o){document.querySelector('body>#main').style.setProperty("--opacity",o+"%");document.getElementById('r1').value=o;}
    const b=localStorage.getItem('b');
    if(b){document.querySelector('body>#main').style.backdropFilter="blur("+b+"px)";document.getElementById('r2').value=b;}
    const s=["t","w","n","f"];
    s.forEach(e=>{var t=localStorage.getItem(e);t&&(e=document.querySelector(`input[name="${e}"][onclick*="${t}"]`))&&(e.checked=!0)});
    showPage('HOME');
});
//替代图像
document.querySelectorAll("img").forEach(M=>{M.onerror=function(){this.src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+DQo8cGF0aCBkPSJNMzA0LjEyOCA0NTYuMTkyYzQ4LjY0IDAgODguMDY0LTM5LjQyNCA4OC4wNjQtODguMDY0cy0zOS40MjQtODguMDY0LTg4LjA2NC04OC4wNjQtODguMDY0IDM5LjQyNC04OC4wNjQgODguMDY0IDM5LjQyNCA4OC4wNjQgODguMDY0IDg4LjA2NHptMC0xMTYuMjI0YzE1LjM2IDAgMjguMTYgMTIuMjg4IDI4LjE2IDI4LjE2cy0xMi4yODggMjguMTYtMjguMTYgMjguMTYtMjguMTYtMTIuMjg4LTI4LjE2LTI4LjE2IDEyLjI4OC0yOC4xNiAyOC4xNi0yOC4xNnoiIGZpbGw9IiNjY2ZmZmZjYyIvPg0KPHBhdGggZD0iTTg4Ny4yOTYgMTU5Ljc0NEgxMzYuNzA0Qzk2Ljc2OCAxNTkuNzQ0IDY0IDE5MiA2NCAyMzIuNDQ4djU1OS4xMDRjMCAzOS45MzYgMzIuMjU2IDcyLjcwNCA3Mi43MDQgNzIuNzA0aDE5OC4xNDRMNTAwLjIyNCA2ODguNjRsLTM2LjM1Mi0yMjIuNzIgMTYyLjMwNC0xMzAuNTYtNjEuNDQgMTQzLjg3MiA5Mi42NzIgMjE0LjAxNi0xMDUuNDcyIDE3MS4wMDhoMzM1LjM2QzkyNy4yMzIgODY0LjI1NiA5NjAgODMyIDk2MCA3OTEuNTUyVjIzMi40NDhjMC0zOS45MzYtMzIuMjU2LTcyLjcwNC03Mi43MDQtNzIuNzA0em0tMTM4Ljc1MiA3MS42OHYuNTEySDg1Ny42YzE2LjM4NCAwIDMwLjIwOCAxMy4zMTIgMzAuMjA4IDMwLjIwOHYzOTkuODcyTDY3My4yOCA0MDguMDY0bDc1LjI2NC0xNzYuNjR6TTMwNC42NCA3OTIuMDY0SDE2NS44ODhjLTE2LjM4NCAwLTMwLjIwOC0xMy4zMTItMzAuMjA4LTMwLjIwOHYtOS43MjhsMTM4Ljc1Mi0xNjQuMzUyIDEwNC45NiAxMjQuNDE2LTc0Ljc1MiA3OS44NzJ6bTgxLjkyLTM1NS44NGwzNy4zNzYgMjI4Ljg2NC0uNTEyLjUxMi0xNDIuODQ4LTE2OS45ODRjLTMuMDcyLTMuNTg0LTkuMjE2LTMuNTg0LTEyLjI4OCAwTDEzNS42OCA2NTIuOFYyNjIuMTQ0YzAtMTYuMzg0IDEzLjMxMi0zMC4yMDggMzAuMjA4LTMwLjIwOGg0NzQuNjI0TDM4Ni41NiA0MzYuMjI0em01MDEuMjQ4IDMyNS42MzJjMCAxNi44OTYtMTMuMzEyIDMwLjIwOC0yOS42OTYgMzAuMjA4SDY4MC45Nmw1Ny4zNDQtOTMuMTg0LTg3LjU1Mi0yMDIuMjQgNy4xNjgtNy42OCAyMjkuODg4IDI3Mi44OTZ6IiBmaWxsPSIjY2NmZmZmY2MiLz4NCjwvc3ZnPg=="}});
//搜索
function search() {
    const keyword = document.querySelector("nav input").value.trim();
    const eventPage = document.getElementById("EVENT");
    if (!eventPage || window.getComputedStyle(eventPage).display === "none") return;
    const paragraphs = eventPage.querySelectorAll("p, li");
    if (!keyword) {
        paragraphs.forEach(el => {
            el.style.display = "";
            el.innerHTML = el.textContent;
        });
        heb();
        return;
    }
    const regex = new RegExp(keyword.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'gi');
    let hasMatch = false;
    paragraphs.forEach(el => {
        const originalText = el.textContent;
        if (regex.test(originalText)) {
            hasMatch = true;
            el.style.display = "";
            el.innerHTML = originalText.replace(regex, match => `<mark>${match}</mark>`);
        } else {
            el.style.display = "none";
        }
        regex.lastIndex = 0;
    });
    heb();
}
//隐藏日志页空div
function heb() {
    document.querySelectorAll("#EVENT>div").forEach(e => {
        var t = Array.from(e.children).some(e => "TIME" !== e.tagName && "none" !== window.getComputedStyle(e).display);
        e.style.display = t ? "" : "none"
    });
    document.querySelectorAll("#EVENT ul").forEach(ul => {
        const allHidden = Array.from(ul.querySelectorAll('li')).every(li => 
            window.getComputedStyle(li).display === 'none'
        );
        ul.style.display = allHidden ? 'none' : '';
    });
    document.querySelectorAll("#EVENT>h1").forEach(e => {
        let t = e.nextElementSibling,
            n = !1;
        for (; t && "H1" !== t.tagName;) {
            if ("none" !== t.style.display) {
                n = !0;
                break
            }
            t = t.nextElementSibling
        }
        e.style.display = n ? "" : "none"
    })
}
heb();
const observer = new MutationObserver(heb);
observer.observe(document.getElementById("EVENT"), {
    childList: !0,
    subtree: !0,
    attributes: !0,
    attributeFilter: ["style"]
});
</script>
<script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/c/sw.js",{scope:"/c/"});</script>
</body>
</html>